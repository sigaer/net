<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport"
        content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
    <title>Document</title>
    <script src="jquery-3.5.1/jquery-3.5.1.min.js"></script>
    <link href="./css/music.css" type="text/css" rel="stylesheet">
    <style>
        body {
            background-image: url("bg/1.jpg");
            background-repeat: no-repeat;
            background-size: cover;
            background-attachment: fixed
        }

        #head {
            width: 100%;
            background-color: #000000;
            height: 40px;
        }

        #head a {
            color: white;
            text-decoration: none;
        }
    </style>
    <script>
        function aboutme() {
            alert("这里是关于我的内容");
        }
    </script>
</head>

<body>
    <div id="head" style="position: fixed;z-index: 2">
        <a href="login.html">登录</a>
        <a href="register.html">注册</a>
        <a href="note.html" hidden="hidden">待办事项</a>
        <a href="#" hidden="hidden" onclick=logout()>登出</a>
        <p id="time" style="position: fixed;z-index: 2;color:#ffffff"></p>
        <script>
            var myVar = setInterval(function () {
                myTimer()
            }, 1000);

            function myTimer() {
                var d = new Date();
                var t = d.toLocaleTimeString();
                document.getElementById("time").innerHTML = t;
            }
        </script>
    </div>
    <div class="header">
        <h1>Vocaloid小站</h1>
    </div>
    <div class="menu">
        <ul>
            <li><a href="p1.html">首页</a></li>
            <li><a href="javascript:void(0);" onclick="aboutme()">关于我</a></li>
            <li><a href="music.html">音乐</a></li>
            <li><a href="pic.html">相册</a></li>
            <li><a href="#">心情</a></li>
            <li><a href="#">留言</a></li>
        </ul>
    </div>
    <div class=right>
        <div class=xtitle>
            <h5>站长推荐</h5>
        </div>
        <ul>
            <li>
                <a href="news.html">资讯1</a>
            </li>
            <li>
                <a href="news.html">资讯2</a>
            </li>
            <li>
                <a href="news.html">资讯3</a>
            </li>
            <li>
                <a href="news.html">资讯4</a>
            </li>
            <li>
                <a href="#">资讯5</a>
            </li>
            <li>
                <a href="#">资讯6</a>
            </li>
            <li>
                <a href="#">资讯7</a>
            </li>
            <li>
                <a href="news.html">资讯8</a>
            </li>
            <li>
                <a href="news.html">资讯9</a>
            </li>
            <li>
                <a href="news.html">资讯10</a>
            </li>
        </ul>
    </div>
    <div class=center>
        <div class=title>
            <h4>千本桜</h4>
        </div>
        <div class="news">
            <ul style="float:left;margin:0 20px">
                <li>
                    <img src="./music/senbonzakura.jpg" alt="">
                </li>
                <li>
                    <audio id="audio"
                        src="http://m10.music.126.net/20210107224107/6c865e8d4c870056cab292f6f419b257/ymusic/469e/c5ca/13be/24736da95054baf0046a637dedcba0e3.mp3"
                        controls="controls"></audio>
                </li>

            </ul>
            <ul>
                <div id="lrc">
                    <ul id="lrclist" style="transform: translateY(250px);">
                        <!-- 保证歌词在正中间 -->

                    </ul>
                </div>
                <script>
                    var lrcJSON = {
                        "[00:31.430]": "大胆不敌(だいたんふてき)に ハイカラ革命(かくめい)",
                        "[00:34.680]": "磊々落々(らいらいらくらく) 反戦(はんせん)国家(こっか)",
                        "[00:37.710]": "日(ひ)の丸(まる)印(じろし)の 二轮车(にりんしゃ)転(ころ)がし",
                        "[00:40.960]": "悪霊退散(あくりょうたいさん) ICBM",
                        "[00:44.900]": "環状線(かんじょうせん)を 走(はし)り抜(ぬ)けて",
                        "[00:47.200]": "東奔西走(とうほんせいそう)なんのその",
                        "[00:50.150]": "少年少女(しょうねんしょうじょ) 戦国无双(せんごくむそう)",
                        "[00:53.100]": "浮世(うきよ)の随(まにま)に",
                        "[00:56.240]": "千本桜(せんぼんざくら) 夜(よる)ニ纷(まぎ)レ",
                        "[00:59.210]": "君(きみ)ノ声(こえ)モ届(とど)カナイヨ",
                        "[01:02.210]": "此処(ここ)は宴(うたげ) 鋼(はがね)の槛(おり)",
                        "[01:05.480]": "その断頭台(だんとうだい)で见下(みお)ろして",
                        "[01:08.820]": "三千世界(さんぜんせかい) 常世之闇(とこよのやみ)",
                        "[01:11.690]": "嘆(なげ)ク呗(うた)モ闻(き)コエナイヨ",
                        "[01:14.770]": "青藍(せいらん)の空(そら) 遥(はる)か彼方(かなた)",
                        "[01:17.850]": "その光線銃(こうせんじゅう)で 打(う)ち抜(ぬ)いて",
                        "[01:33.670]": "百戦錬磨(ひゃくせんれんま)の见(み)た目(め)は将校(しょうこう)",
                        "[01:36.930]": "いったりきたりの花魁(おいらん)道中(どうちゅう)",
                        "[01:40.900]": "アイツもコイツも皆(みな)で集(あつ)まれ",
                        "[01:43.100]": "圣者(せいじゃ)の行进(こうしん) わんっ つー さん しっ",
                        "[01:46.420]": "禅定门(ぜんじょうもん)を潜(くぐ)り抜(ぬ)けて",
                        "[01:49.320]": "安楽(あんらく)浄土(じょうど)厄払(やくばら)い",
                        "[01:52.450]": "きっと终幕(さいご)は大団円(だいだんえん) ",
                        "[01:55.350]": "拍手(はくしゅ)の合间(あいま)に",
                        "[01:58.680]": "千本桜(せんぼんざくら) 夜(よる)ニ纷(まぎ)レ",
                        "[02:01.580]": "君(きみ)ノ声(こえ)モ届(とど)カナイヨ",
                        "[02:04.650]": "此処(ここ)は宴(うたげ) 鋼(はがね)の槛(おり)",
                        "[02:07.790]": "その断頭台(だんとうだい)で见下(みお)ろして",
                        "[02:11.500]": "三千世界(さんぜんせかい) 常世之闇(とこよのやみ)",
                        "[02:13.970]": "嘆(なげ)ク呗(うた)モ闻(き)コエナイヨ",
                        "[02:17.130]": "希望(きぼう)の丘(おか) 遥(はる)か彼方(かなた)",
                        "[02:20.250]": "その闪光弾(せんこうだん)を打(ぶ)ち上(あ)げろ",
                        "[02:34.950]": "*主演：初音ミク*",
                        "[02:54.770]": "環状線(かんじょうせん)を 走(はし)り抜(ぬ)けて",
                        "[02:57.900]": "東奔西走(とうほんせいそう)なんのその",
                        "[03:01.700]": "少年少女(しょうねんしょうじょ) 戦国无双(せんごくむそう)",
                        "[03:04.400]": "浮世(うきよ)の随(まにま)に",
                        "[03:07.120]": "千本桜(せんぼんざくら) 夜(よる)ニ纷(まぎ)レ",
                        "[03:10.900]": "君(きみ)ノ声(こえ)モ届(とど)カナイヨ",
                        "[03:13.130]": "此処(ここ)は宴(うたげ) 鋼(はがね)の槛(おり)",
                        "[03:16.260]": "その断頭台(だんとうだい)を飛び降(お)りて",
                        "[03:19.680]": "千本桜(せんぼんざくら) 夜(よる)ニ纷(まぎ)レ",
                        "[03:22.450]": "君(きみ)が歌(うた)い僕(ぼく)は踊(おど)る",
                        "[03:25.610]": "此処(ここ)は宴(うたげ) 鋼(はがね)の槛(おり)",
                        "[03:28.710]": "さあ光線銃(こうせんじゅう)を打ちまくれ"
                    };
                    var lrcTime = []; //歌词对应的时间数组
                    var ul = $("#lrclist")[0]; //获取ul
                    var i = 0;
                    $.each(lrcJSON, function (key, value) { //遍历lrc
                        lrcTime[i++] = parseFloat(key.substr(1, 3)) * 60 + parseFloat(key.substring(4,
                            10)); //00:00.000转化为00.000格式
                        ul.innerHTML += "<li><p>" + lrcJSON[key] + "</p></li>"; //ul里填充歌词
                    });
                    lrcTime[lrcTime.length] = lrcTime[lrcTime.length - 1] + 3; //如不另加一个结束时间，到最后歌词滚动不到最后一句


                    var $li = $("#lrclist>li"); //获取所有li

                    var currentLine = 0; //当前播放到哪一句了
                    var currentTime; //当前播放的时间
                    var audio = document.getElementById("audio");
                    var ppxx; //保存ul的translateY值

                    audio.ontimeupdate = function () { //audio时间改变事件
                        currentTime = audio.currentTime;
                        for (j = currentLine, len = lrcTime.length; j < len; j++) {
                            if (currentTime < lrcTime[j + 1] && currentTime > lrcTime[j]) {
                                currentLine = j;
                                ppxx = 250 - (currentLine * 32);
                                ul.style.transform = "translateY(" + ppxx + "px)";
                                $li.get(currentLine - 1).className = "";
                                console.log("on" + currentLine);
                                $li.get(currentLine).className = "on";
                                break;
                            }
                        }
                    };

                    audio.onseeked = function () { //audio进度更改后事件
                        currentTime = audio.currentTime;
                        console.log("  off" + currentLine);
                        $li.get(currentLine).className = "";
                        for (k = 0, len = lrcTime.length; k < len; k++) {
                            if (currentTime < lrcTime[k + 1] && currentTime < lrcTime[k]) {
                                currentLine = k;
                                break;
                            }
                        }
                    };
                </script>
            </ul>
        </div>
    </div>
    <div id="aa"></div>
</body>

</html>